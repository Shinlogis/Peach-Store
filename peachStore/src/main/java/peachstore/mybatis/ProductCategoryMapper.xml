<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="peachstore.repository.ProductCategoryDAO">

	<resultMap id="ProductCategoryResultMap" type="peachstore.domain.ProductCategory">
		<result column="product_category_id" property="productCategoryId"/>
		<result column="product_category_name" property="productCategoryName"/>
		<result column="is_active" property="isActive"/>
	</resultMap>
	
	<!-- 전체 조회 (검색 포함) -->
	<select id="selectAll" resultMap="ProductCategoryResultMap" parameterType="map">
	    select product_category_id, product_category_name, is_active
	    from product_category
	    where is_active = true
	    <if test="searchKey != null and searchKey != ''">
	        and product_category_name like concat('%', #{searchKey}, '%')
	    </if>
	    order by product_category_id desc
	</select>

	<!-- 등록 -->
	<insert id="insert" parameterType="peachstore.domain.ProductCategory">
		insert into product_category(product_category_name) 
		values(#{productCategoryName})
	</insert>

	<!-- 수정 -->
	<update id="update" parameterType="peachstore.domain.ProductCategory">
	    update product_category
	    set 
	    	product_category_name = #{productCategoryName}
	        , is_active = #{active}
	    where product_category_id = #{productCategoryId}
	</update>

	<!-- pk를 통한 조회 -->
	<select id="findById" resultMap="ProductCategoryResultMap">
	    select * 
	    from product_category 
	    where product_category_id = #{productCategoryId}
	</select>


</mapper>
